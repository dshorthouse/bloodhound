%nav{class:"navbar navbar-expand-md navbar-dark bg-dark"}
  %a{class:"navbar-brand", href:"/"}
    %img{src: "/images/logo.png", height:48, alt: "Bloodhound"}
  %button{class:"navbar-toggler", type:"button", "data-toggle":"collapse", "data-target":"#navbarSupportedContent", "aria-controls":"navbarSupportedContent", "aria-expanded":"false", "aria-label":"Toggle navigation"}
    %span{class:"navbar-toggler-icon"}
  %div{class: "collapse navbar-collapse", id:"navbarSupportedContent"}
    %ul{class: "navbar-nav mr-auto"}
      %li{class: "nav-item"}
        %a{ href: "/roster", class:"nav-link#{locals[:active_page] == "roster" ? " active" : nil}" }
          %i{class:"fas fa-users"}
          = I18n.t('layout.profiles')
      %li{class: "nav-item"}
        %a{ href: "/trainers", class: "nav-link#{locals[:active_page] == "trainers" ? " active" : nil}"}
          %i{class:"fas fa-bone"}
          = I18n.t('layout.trainers')
      %li{class: "nav-item"}
        %a{ href: "/organizations", class:"nav-link#{locals[:active_page] == "organizations" ? " active" : nil}" }
          %i{class:"fas fa-building"}
          = I18n.t('layout.organizations')
      %li{class: "nav-item"}
        %a{ href: "/datasets", class:"nav-link#{locals[:active_page] == "datasets" ? " active" : nil}" }
          %i{class:"fas fa-database"}
          = I18n.t('layout.datasets')
      %li{class: "nav-item"}
        %a{ href: "/countries", class:"nav-link#{locals[:active_page] == "countries" ? " active" : nil}" }
          %i{class:"fas fa-globe"}
          = I18n.t('layout.countries')
      %li{class: "nav-item"}
        %a{ href: '/agents', class: "nav-link#{locals[:active_page] == "agents" ? " active" : nil}" }
          %i{class:"fas fa-user-secret"}
          = I18n.t('layout.agents')
    %ul{class: "navbar-nav"}
      - if authorized?
        %li{class: "nav-item"}
          %a{ href: "/help-others", class: "nav-link#{locals[:active_page] == "help" ? " active" : nil}"}
            %i{class:"fas fa-hands-helping"}
            = I18n.t('layout.help_others')
      - if authorized?
        %li{class: "nav-item"}
          %div{class:"btn-group"}
            %a{class:"btn btn-outline-light#{locals[:active_page] == "profile" ? " active" : " text-muted"}", href:"/profile", role:"button"}
              - if @user.image_url
                - if locals[:active_page] == "profile"
                  %img{src:"#{profile_image(@user, 'thumbnail')}", alt:"#{@user.fullname}"}
                - else
                  %img{src:"#{profile_image(@user, 'thumbnail_grey')}", alt:"#{@user.fullname}"}
              - else
                %i{class:"fas fa-user", alt:"#{@user.fullname}"}
            %button{class:"btn btn-outline-light dropdown-toggle", type:"button", "data-toggle": "dropdown", "aria-haspopup": "true", "aria-expanded": "false"}
              %span{class:"sr-only"}= I18n.t('layout.toggle_dropdown')
            %div{class:"dropdown-menu dropdown-menu-right"}
              %a{href:"/profile", class:"dropdown-item"}
                %i{class:"fas fa-user"}
                = I18n.t('layout.overview')
              %a{href:"/profile/specimens", class:"dropdown-item"}
                %i{class:"fas fa-th"}
                = I18n.t('layout.specimens')
              %a{href:"/profile/helped", class:"dropdown-item"}
                %i{class:"fas fa-hands-helping"}
                = I18n.t('layout.people_helped')
              %a{href:"/profile/citations", class:"dropdown-item"}
                %i{class:"fas fa-flask"}
                = I18n.t('layout.science_enabled')
              %a{href:"/profile/settings", class:"dropdown-item"}
                %i{class:"fas fa-cog"}
                = I18n.t('layout.settings')
              - if admin_authorized?
                %a{href: "/admin", class:"dropdown-item"}
                  %i{class:"fas fa-users-cog"}
                  = I18n.t('layout.administration')
              %a{ href: "/logout", class: "dropdown-item" }
                %i{class:"fas fa-sign-out-alt"}
                = I18n.t('layout.logout')
      - else
        %li
          %a{ href:"/auth/orcid?lang=#{I18n.locale}", role: "button", class: "btn btn-outline-light connect-orcid-button" }
            %i{class:"fab fa-orcid"}
            = I18n.t('home.orcid_login')
