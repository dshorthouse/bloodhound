= haml :'partials/dataset/twitter_img', layout: false

-content_for :title do
  #{@dataset.title} Agent Strings

%div{class:"row"}
  = haml :'partials/dataset/jumbotron', layout:false

  %div{class:"col-12 col-lg-8 mt-2"}
    = haml :'partials/dataset/tabs', layout:false, locals: { active_tab: locals[:active_tab] }

    %nav{id:"network-nav", class:"navbar navbar-light navbar-expand bg-light overflow-auto"}
      %ul{class:"navbar-nav"}
        %li{class:"nav-item"}
          %a{class:"nav-link#{locals[:active_subtab] == "default" ? " active" : nil}", href:"/dataset/#{@dataset.datasetKey}/agents"} Alphabetical
        %li{class:"nav-item"}
          %a{class:"nav-link#{locals[:active_subtab] == "counts" ? " active" : nil}", href:"/dataset/#{@dataset.datasetKey}/agents/counts"} Counts

    - if @pagy.count == 0
      %div{class: "alert alert-info tiny-margins", role: "alert"}
        Raw strings from parsed collector and determiner names in specimen data included in this dataset have not yet been recorded
    - else
      %div{class: "alert alert-info tiny-margins", role: "alert"}
        #{number_with_delimiter(@pagy.count)} raw #{'string'.pluralize(@pagy.count)} from parsed collector and determiner names in specimen data included in this dataset

      %div{class: "row"}
        - @results.in_groups_of(25, false).each do |group|
          %div{class: "col-12 col-sm-3 mb-3"}
            %ul{class: "list-unstyled m-2"}
              - group.each do |a|
                - agent = Agent.find(a[0])
                %li
                  %a{href:"/agent/#{agent.id}"} #{agent.fullname_reverse}
                  %span{class:"badge badge-light"} #{number_with_delimiter(a[1])}

      - if @pagy.pages > 1
        %div{style:"overflow-y:scroll"}
          = pagy_bootstrap_nav(@pagy)
