- content_for(:title, "#{@viewed_user.fullname} : Bloodhound")

- content_for :stylesheets do
  %link{rel:"stylesheet", href:"/css/jquery-jvectormap-2.0.3.css"}

- content_for :scripts do
  %script{src: "/js/jquery-jvectormap-2.0.3.min.js"}
  %script{src: "/js/jquery-jvectormap-world-mill.js"}
  :javascript
    var countryData=#{@country_counts.to_json};
    $(function() {
      var map = $('#world-map');
      map.vectorMap({
        map: 'world_mill',
        backgroundColor: '#fff',
        regionStyle: {
          initial: {
            fill: "#e9ecef"
          }
        },
        series: {
          regions: [{
            values: Object.keys(countryData).reduce(function (result,item) {
              result[item] = countryData[item].count;
              return result; 
            }, {}),
            scale: ['#C8EEFF', '#0071A4'],
            normalizeFunction: 'polynomial'
          }]
        },
        onRegionTipShow: function(e, el, code) {
          count = 0
          if (countryData.hasOwnProperty(code)) {
            count = countryData[code].count;
          }
          el.html(el.html()+' ('+count+')');
        }
      });
    });

- content_for :jumbotron do
  %div{class:"jumbotron jumbotron-fluid"}
    %div{class:"container-fluid"}

      %h2{class:"display-4 text-center"}= @viewed_user.fullname

      %div{class:"row justify-content-center text-center"}
        %div{class:"col-xl-6"}
          %div.row
            - if !@viewed_user[:other_names].blank?
              %dl{class: "col"}
                %dt Also known as
                %dd #{@viewed_user[:other_names].split("|").join("; ")}
            - if !@viewed_user[:country].blank?
              %dl{class: "col"}
                %dt Country
                %dd #{@viewed_user[:country]}

      %div{class: "orcid text-center"}
        %a{href: "https://orcid.org/#{@viewed_user[:orcid]}"}
          %img{src: "/images/orcid_24x24.png", alt:"ORCID iD"}
        %a{href: "https://orcid.org/#{@viewed_user[:orcid]}"} https://orcid.org/#{@viewed_user[:orcid]}

%ul{class: "nav nav-tabs"}
  %li{class: "nav-item"}
    %a{class: "nav-link active", href: "/#{@viewed_user[:orcid]}"} Overview
  %li{class: "nav-item"}
    %a{class: "nav-link", href: "/#{@viewed_user[:orcid]}/specialties"} Specialties
  %li{class: "nav-item"}
    %a{class: "nav-link", href: "/#{@viewed_user[:orcid]}/specimens"} Specimens

%div{class: "alert alert-info row", role: "alert", style:"margin-left:0.1em;margin-right:0.1em"}
  = succeed "." do
    Collected #{number_with_delimiter(@total[:number_recorded])} specimens from #{@country_counts.count} countries and identified #{number_with_delimiter(@total[:number_identified])} specimens
    - if @total[:number_helped] > 0
      and helped #{number_with_delimiter(@total[:number_helped])} #{'user'.pluralize(@total[:number_helped])} claim a total of #{number_with_delimiter(@total[:number_claims_given])} #{'specimen'.pluralize(@total[:number_claims_given])}

#world-map{style:"width: 80%; height: 400px"}