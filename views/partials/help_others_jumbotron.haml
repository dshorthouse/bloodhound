%div{class:"jumbotron jumbotron-fluid alert-warning-light"}

  %div{class:"row"}
    %div{class:"col"}
      - if @viewed_user.image_url
        %div{id:"profile-image", class:"mx-auto d-block align-self-center align-items-center"}
          %img{src:"#{profile_image(@viewed_user)}", class:"rounded mx-auto d-block img-fluid", alt:"#{@viewed_user.fullname}"}
      - if @viewed_user.signature_url
        %div{id:"signature-image", class:"mx-auto d-block align-self-center align-items-center"}
          %img{src:"#{signature_image(@viewed_user)}", class:"mx-auto d-block img-fluid", itemprop:"image", alt:"#{@viewed_user.fullname} signature"}

    %div{class:"col-12 col-md-6"}

      %h1{class:"mt-3 h2 text-center", itemprop: "name"}= @viewed_user.fullname

      - if !@viewed_user.other_names.blank?
        %p{class:"text-center text-muted p-0 m-0"}= @viewed_user.other_names.split("|").join("; ")

      - if @viewed_user.wikidata
        %p{class:"text-center text-muted p-0"}= format_lifespan(@viewed_user)

      - if !@viewed_user.keywords.blank?
        %p{class: "text-center text-muted font-italic pt-2"}
          #{@viewed_user.keywords.split("|").join(", ")}

      %div{class: "orcid text-lg-center p-0 mt-4"}
        - if @viewed_user.orcid
          %a{href: "https://orcid.org/#{@viewed_user.orcid}"}
            %i{class:"fab fa-orcid"}
            https://orcid.org/#{@viewed_user.orcid}
        - else
          %img{src: "/images/wikidata_16x16.png", alt:"Wikidata iD"}
          %a{href: "https://www.wikidata.org/wiki/#{@viewed_user.wikidata}"} https://www.wikidata.org/wiki/#{@viewed_user.wikidata}

      - org = @viewed_user.current_organization
      - if !org.nil?
        %p{class: "text-lg-center p-0 m-0"}
          = succeed "," do
            %i{class:"fas fa-building"}
            %a{href: "/organization/#{org.identifier}"} #{org.name}
          #{org.address}

      - if !@viewed_user.country.blank?
        %p{class:"text-lg-center p-0 m-0"}
          %i{class:"fas fa-globe"}
          #{@viewed_user.country.split("|").join(", ")}


      - if authorized? && !@viewed_user.is_public? && !@viewed_user.wikidata.nil?
        %div{class:"modal fade text-left", id:"helperPublicModal", tabindex:"-1", role:"dialog", "aria-labelledby":"helperPublicModal", "aria-hidden":"true"}
          %div{class:"modal-dialog", role:"document"}
            %div{class:"modal-content"}
              %div{class:"modal-header"}
                %h5{class:"modal-title", id:"helperPublicLabel"}
                  %i{class:"fas fa-unlock"}
                  Make Public
                %button{type:"button", class:"close", "data-dismiss":"modal", "aria-label":"Close"}
                  %span{"aria-hidden":"true"} &times;
              %div{class:"modal-body"}
                %p
                  Would you like to make #{@viewed_user.fullname}'s profile publicly available? An automated Tweet from
                  %a{href:"https://twitter.com/BloodhoundTrack", target:"_blank"} @BloodhoundTrack
                  will be sent announcing the new profile.
                %p{id:"helpers-list", style:"display:none;"}
                  Other trainers have also helped attribute #{@viewed_user.fullname}'s specimens:
                %ul
                %p{id:"helpers-list-none", style:"display:none;"}
                  No other trainers have helped claim #{@viewed_user.fullname}'s specimens.
                
              %div{class:"modal-footer"}
                %form{action: "/help-others/#{@viewed_user.identifier}/visibility", method: :post}
                  %button{type:"button", class:"btn btn-sm btn-outline-secondary", "data-dismiss":"modal"} Not yet
                  %input{type: :hidden, name: "_method", value: 'PUT'}
                  %input{type: :submit, class:"btn btn-sm btn-outline-success", value:"Yes, Make Public"}
          
      - if authorized?
        %div{class: "text-center border-top mt-3 pt-3"}
          - if @viewed_user.is_public?
            %a{href: "/#{@viewed_user.identifier}", class: "btn btn-sm btn-outline-success"}
              %i{class:"fas fa-user"}
              Public Profile
          - if !@viewed_user.is_public? && !@viewed_user.wikidata.nil?
            %button{type: "button", class:"btn btn-sm btn-outline-success", "data-toggle": "modal", "data-target": "#helperPublicModal"}
              %i{class:"fas fa-unlock"}
              Make Public

          %a{href:"/help-others/refresh.json?user_id=#{@viewed_user.id}", role:"button", class:"btn btn-sm btn-outline-success profile-refresh"}
            %i{class: "fas fa-sync-alt"}
            Refresh
            - if @viewed_user.orcid
              %i{class:"fab fa-orcid"}
            - else
              %img{src: "/images/wikidata_16x16.png", alt:"Wikidata iD", width:"18px"}

          - if admin_authorized?
            %a{href: "/admin/user/#{@viewed_user.identifier}/settings", class: "ml-2"}
              %i{class:"fas fa-cog"}
              Settings

        %div{class:"alert alert-success alert-dismissible fade show text-center", role: "alert"}
          - source = @viewed_user.orcid ? "ORCID" : "Wikidata"
          Data from #{source} were refreshed.
          %button{type:"button", class:"close", "data-dismiss":"alert", "aria-label":"Close"}
            %span{"aria-hidden":"true"} &times;

    %div{class:"col"}