%script{id:"dsq-count-scr", src:"//#{Sinatra::Application.settings.disqus_shortname}.disqus.com/count.js", async:""}

%div{class:"jumbotron jumbotron-fluid"}
  %div{class:"container-fluid"}

    %h2{class:"display-4 text-center"}= @viewed_user.fullname

    - if @viewed_user.date_born || @viewed_user.date_died
      %div{class: "text-center"}
        = format_lifespan(@viewed_user)

    %div{class:"row justify-content-center text-center"}
      %div{class:"col-sm-12 col-md-10 col-xl-10"}
        %div.row
          - org = @viewed_user.current_organization
          - if !@viewed_user.other_names.blank?
            %dl{class: "col"}
              %dt Also known as
              %dd #{@viewed_user.other_names.split("|").join("; ")}
          - if !@viewed_user[:country].blank?
            %dl{class: "col"}
              %dt Country
              %dd #{@viewed_user.country.split("|").join("; ")}
          - if !org.nil?
            %dl{class: "col"}
              %dt Organization
              %dd
                - path = org.ringgold || org.grid
                = succeed "," do
                  %a{href: "/organization/#{path}"} #{org.name}
                #{org.address}

    %div{class: "orcid text-center"}
      - if @viewed_user.orcid
        %a{href: "https://orcid.org/#{@viewed_user.orcid}"}
          %img{src: "/images/orcid_24x24.png", alt:"ORCID iD"}
        %a{href: "https://orcid.org/#{@viewed_user.orcid}"} https://orcid.org/#{@viewed_user.orcid}
      - else
        %a{href: "https://www.wikidata.org/wiki/#{@viewed_user.wikidata}"}
          %img{src: "/images/wikidata_24x24.png", alt:"ORCID iD"}
          %a{href: "https://www.wikidata.org/wiki/#{@viewed_user.wikidata}"} https://www.wikidata.org/wiki/#{@viewed_user.wikidata}
    - if Sinatra::Application.settings.disqus_domain && !locals[:search] && @viewed_user.can_comment?
      %div{class: "text-right"}
        %img{src: "/images/comments.png", alt:"Field notes"}
        %a{href: "#{Sinatra::Application.settings.disqus_domain}/#{@viewed_user.identifier}/comments#disqus_thread", class:"disqus-comment-count", "data-disqus-identifier":"#{@viewed_user.identifier}"} Field notes

    - if locals[:search]
      = haml :'partials/help_others_search', layout: false