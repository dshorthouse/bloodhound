-content_for :title do
  Helped Accounts

- content_for :scripts do
  %script{src: "/js/progress-bar.js"}
  :javascript
    $(function() {
      $('.progress-bar').each(function() {
        ProgressBar.init($(this).attr("id").split("_").pop());
      });
    });

-content_for :jumbotron do
  %div{class:"jumbotron jumbotron-fluid alert-warning d-flex flex-wrap"}
    %div{class:"mr-auto"}
      %h1{class:"h2"} Helped Accounts

%div{class:"mb-3"}
  %nav{id:"network-nav", class:"navbar navbar-light navbar-expand bg-light"}
    %ul{class:"navbar-nav"}
      %li{class:"nav-item"}
        %a{class:"nav-link#{locals[:active_tab] == "orcid" ? " active" : nil}", href:"/admin/users/helped"} ORCID
      %li{class:"nav-item"}
        %a{class:"nav-link#{locals[:active_tab] == "wikidata" ? " active" : nil}", href:"/admin/users/helped/wikidata"} Wikidata

%div{class:"table-responsive-lg"}
  %table{class:"table table-hover table-sm"}
    %thead{class: "thead-light"}
      %tr
        %th{scope: "col"} Account
        %th{scope: "col"} Progress
        %th{scope: "col"} Public
        %th{scope: "col"} Last Helped By
        %th{scope: "col"} Last Helped

    %tbody
      - @results.each do |claim|
        %tr
          %td
            - if claim.user.orcid
              %i{class:"fab fa-orcid"}
            - else
              %img{src: "/images/wikidata_16x16.png", alt:"Wikidata iD"}
            %a{href: "/admin/user/#{claim.user.identifier}"} #{claim.user.fullname_reverse}
          %td
            %div{class:"progress", style:"border:1px solid rgba(0,0,0,.125);inline"}
              %div{id:"progress-bar_#{claim.user.identifier}", class:"progress-bar bg-info", role:"progressbar", style:"width: 0%;inline", "aria-valuenow":"0", "aria-valuemin":"0", "aria-valuemax":"100"}
          %td
            - if claim.user.is_public?
              %span{class: "text-success"} #{claim.user.is_public}
            - else
              #{claim.user.is_public}
          %td
            #{claim.claimant.fullname_reverse}
          %td
            #{claim.created}

= pagy_bootstrap_nav(@pagy) if @pagy.pages > 1