-content_for :title do
  Bloodhound: Profile

-content_for :scripts do
  %script{src:"/js/application.js"}
  :javascript
    $(function() {
        Application.init(#{@user[:id]});
    });

-content_for :jumbotron do
  %div{class:"jumbotron jumbotron-fluid"}
    %div{class: "container-fluid"}

      %h2{class:"display-4 text-center"}= @user[:fullname]

      %div{class: "row justify-content-center text-center"}
        %div{class: "col-xl-8"}
          %div.row
            - if !@user[:other_names].blank?
              %dl{class: "col"}
                %dt Also known as
                %dd #{@user[:other_names].split("|").join("; ")}
            - if !@user[:country].blank?
              %dl{class: "col"}
                %dt Country
                %dd #{@user[:country]}
          %div.row
            %div{class: "col orcid text-center"}
              %a{href: "https://orcid.org/#{@user[:orcid]}"}
                %img{src: "/images/orcid_24x24.png", alt:"ORCID iD"}
              %a{href: "https://orcid.org/#{@user[:orcid]}"} https://orcid.org/#{@user[:orcid]}

          %div.row
            %div{id: "profile-buttons", class: "col text-center"}
              %input{type:"checkbox", id: "toggle-public", "data-toggle":"toggle", "data-on":"Public", "data-off":"Private", "data-onstyle": "success", "data-size": "small", checked: is_public?, class:"btn-claim" }
              %a{ href:"/orcid-refresh.json?user_id=#{@user[:id]}", role: "button", class:"btn btn-sm btn-outline-success orcid-refresh"} Refresh ORCID Data
              %a{ href:"/help-users", role: "button", class:"btn btn-sm btn-outline-success"} Help Other Users

          %div{class:"alert row alert-success alert-dismissible fade show", role: "alert"}
            ORCID Data was refreshed.
            %button{type:"button", class:"close", "data-dismiss":"alert", "aria-label":"Close"}
              %span{"aria-hidden":"true"} &times;

%ul{class: "nav nav-tabs"}
  %li{class: "nav-item"}
    %a{class: "nav-link active", href: "/profile"} Overview
  %li{class: "nav-item"}
    %a{class: "nav-link", href: "/profile/specimens"} Your Claimed Specimens
  %li{class: "nav-item"}
    %a{class: "nav-link", href: "/profile/candidates"} Your Unclaimed Specimens
  %li{class: "nav-item"}
    %a{class: "nav-link", href: "/profile/ignored"} Ignored Specimens
  %li{class: "nav-item"}
    %a{class: "nav-link", href: "/profile/support"} Help Received

%div{class: "alert alert-info row", role: "alert", style:"margin-left:0.1em;margin-right:0.1em"}
  = succeed "." do
    Collected #{number_with_delimiter(@total[:number_recorded])} and identified #{number_with_delimiter(@total[:number_identified])} specimens
    - if @total[:number_helped] > 0
      and helped #{number_with_delimiter(@total[:number_helped])} #{'user'.pluralize(@total[:number_helped])} claim a total of #{number_with_delimiter(@total[:number_claims_given])} #{'specimen'.pluralize(@total[:number_claims_given])}

- if @total[:number_helped] > 0
  %h2 Users Helped

  %div{class: "container-fluid"}
    %div{class: "row"}
      %div{class: "col"}
        %ul{class: "list-group"}
          - @helped.each do |u|
            %li{class: "list-group-item d-flex justify-content-between align-items-center"}
              %a{href: "/help-user/#{u[:orcid]}"} #{u[:name]}
              %span{class: "badge badge-success badge-pill"} #{number_with_delimiter(u[:count])}
      %div{class: "col"}
  
